"use strict";(self.webpackChunkrental_car_test_task=self.webpackChunkrental_car_test_task||[]).push([[461],{136:function(e,n,r){r.d(n,{R:function(){return m}});var t,a=r(683),i=r(439),o=r(135),c=r(93),l=r(535),s=r(184),u=function(e){var n=e.item,r=e.changeFavoriteList,t=e.onOpenModal,u=n.id,d=n.img,f=n.model,m=n.make,p=n.year,h=n.rentalPrice,g=n.address,x=n.rentalCompany,v=n.type,b=n.mileage,j=n.functionalities,Z=n.isFavorite,S=g.split(", ").slice(-2),k=(0,i.Z)(S,2),y=k[0],F=k[1];return(0,s.jsxs)(c.W2,{children:[(0,s.jsx)(c.Lr,{onClick:function(){var e=JSON.parse(localStorage.getItem("favorite"))||[];if(Z){var t=e.findIndex((function(e){return e.id===u}));-1!==t&&e.splice(t,1)}else e.unshift((0,a.Z)((0,a.Z)({},n),{},{isFavorite:!Z}));localStorage.setItem("favorite",JSON.stringify(e)),r(u)},children:Z?(0,s.jsx)(o.$0H,{style:{color:"var(--primary-color)"}}):(0,s.jsx)(o.BgW,{style:{color:"var(--secondary-text-color)"}})}),(0,s.jsx)(c.Yo,{src:d,alt:f,imageWidth:"274px",imageHeight:"268px"}),(0,s.jsxs)(c.c7,{children:[(0,s.jsxs)(c.Dx,{fontSize:"16px",children:[m," ",(0,s.jsx)("span",{children:f}),", ",p]}),(0,s.jsxs)(c.Dx,{fontSize:"16px",children:["$",h]})]}),(0,s.jsxs)(c.NF,{marginBottom:"28px",children:[(0,s.jsxs)(c.dk,{children:[y," | ",F," | ",x]}),(0,s.jsxs)(c.dk,{children:[v," | ",b," | ",j[0]]})]}),(0,s.jsx)(l.z,{buttonWidth:"274 px",toogleModal:function(){return t(n)},children:"Learn more"})]})},d=r(168),f=r(686).Z.section(t||(t=(0,d.Z)(["\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tcolumn-gap: 29px;\n\trow-gap: 50px;\n\n\tmargin-bottom: 100px;\n"]))),m=function(e){var n=e.catalog,r=e.changeFavoriteList,t=e.onOpenModal;return(0,s.jsx)(f,{children:n.map((function(e){return(0,s.jsx)(u,{item:e,changeFavoriteList:r,onOpenModal:t},e.id)}))})}},461:function(e,n,r){r.r(n),r.d(n,{default:function(){return Z}});var t,a,i=r(433),o=r(165),c=r(861),l=r(439),s=r(243).Z.create({baseURL:"https://6499583879fbe9bcf83f0d64.mockapi.io/rental-cars",timeout:3e3}),u=r(791),d=r(136),f=r(168),m=r(686),p=m.Z.button(t||(t=(0,f.Z)(["\n  border: 0;\n  background-color: inherit;\n  padding-inline: 0;\n  padding-block: 0;\n\n  margin-bottom: 150px;\n  color: var(--primary-color);\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 24px;\n  text-decoration-line: underline;\n\n  &:hover {\n    color: var(--secondary-color);\n  }\n"]))),h=r(184),g=function(e){var n=e.setPage;return(0,h.jsx)(p,{type:"button",onClick:function(){n((function(e){return e+1}))},children:"Load More"})},x=m.Z.main(a||(a=(0,f.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),v=["Buick","Volvo","HUMMER","Subaru","Mitsubishi","Nissan","Lincoln","GMC","Hyundai","MINI","Bentley","Mercedes-Benz","Aston Martin","Pontiac","Lamborghini","Audi","BMW","Chevrolet","Mercedes-Benz","Chrysler","Kia","Land"],b=[30,40,50,60,70,80,90,100,110,120,130,140,150],j=function(e){var n=e.onHandleSearchForm,r=(0,u.useState)(""),t=(0,l.Z)(r,2),a=t[0],i=t[1],o=(0,u.useState)(""),c=(0,l.Z)(o,2),s=c[0],d=c[1],f=(0,u.useState)(""),m=(0,l.Z)(f,2),p=m[0],g=m[1],x=(0,u.useState)(""),j=(0,l.Z)(x,2),Z=j[0],S=j[1],k=function(e){var n=e.currentTarget,r=n.name,t=n.value;switch(r){case"carBrand":i(t);break;case"pricePerHour":d(t);break;case"mileageFrom":g(t);break;case"mileageTo":S(t)}},y=function(){i(""),d(""),g(""),S("")};return(0,h.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r={};""!==a&&(r.carBrand=a),""!==s&&(r.pricePerHour=s),""!==p&&(r.mileageFrom=p),""!==Z&&(r.mileageTo=Z),n(r),y()},children:[(0,h.jsxs)("label",{htmlFor:"carBrand",children:["Car brand",(0,h.jsx)("select",{name:"carBrand",id:"carBrand",onChange:k,children:v.map((function(e,n){return(0,h.jsx)("option",{value:e,children:e},n)}))})]}),(0,h.jsxs)("label",{htmlFor:"pricePerHour",children:["Price/ 1 hour",(0,h.jsx)("select",{name:"pricePerHour",id:"pricePerHour",onChange:k,children:b.map((function(e,n){return(0,h.jsx)("option",{value:e,children:e},n)}))})]}),(0,h.jsxs)("label",{htmlFor:"mileage",children:["\u0421ar mileage / km",(0,h.jsx)("input",{type:"number",name:"mileageFrom",onChange:k,value:p,id:"mileage","aria-label":"Mileage From"}),(0,h.jsx)("input",{type:"number",name:"mileageTo",onChange:k,value:Z,id:"mileage","aria-label":"Mileage To"})]}),(0,h.jsx)("button",{type:"submit","aria-label":"Submit",children:"Search"})]})},Z=function(e){var n=e.onOpenModal,r=(0,u.useState)([]),t=(0,l.Z)(r,2),a=t[0],f=t[1],m=(0,u.useState)([]),p=(0,l.Z)(m,2),v=p[0],b=p[1],Z=(0,u.useState)([]),S=(0,l.Z)(Z,2),k=S[0],y=S[1],F=(0,u.useState)(1),M=(0,l.Z)(F,2),B=M[0],C=M[1],H=(0,u.useState)(0),P=(0,l.Z)(H,2),L=P[0],w=P[1],O=(0,u.useState)(!1),E=(0,l.Z)(O,2),T=E[0],z=E[1],I=(0,u.useState)({}),N=(0,l.Z)(I,2),_=N[0],W=N[1];(0,u.useEffect)((function(){var e;!function(){(e=e||(0,c.Z)((0,o.Z)().mark((function e(){var n,r,t,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.get("/");case 3:n=e.sent,r=n.data,t=JSON.parse(localStorage.getItem("favorite"))||[],a={},t.forEach((function(e){a[e.id]=e})),r.forEach((function(e){a[e.id]?e.isFavorite=!0:e.isFavorite=!1})),f(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}()}),[]),(0,u.useEffect)((function(){k.length>0&&z(!0),k.length===L&&z(!1)}),[k,L]),(0,u.useEffect)((function(){if(0===Object.keys(_).length)C(1),w(a.length),b(a),y([]);else{var e=a.filter((function(e){return(!_.carBrand||e.make===_.carBrand)&&(!_.pricePerHour||e.rentalPrice<=_.pricePerHour)&&(!_.mileageFrom||e.mileage>=_.mileageFrom)&&(!_.mileageTo||e.mileage<=_.mileageTo)}));C(1),w(e.length),b(e),y([])}}),[a,_]),(0,u.useEffect)((function(){if(0!==L){var e=8*(B-1),n=e+8<=L?e+8:L,r=v.slice(e,n);y((function(e){return[].concat((0,i.Z)(e),(0,i.Z)(r))}))}}),[B,L,v]);return(0,h.jsxs)(x,{children:[(0,h.jsx)(j,{onHandleSearchForm:function(e){W(e)}}),(0,h.jsx)(d.R,{catalog:k,changeFavoriteList:function(e){var n=a.map((function(n){return n.id===e&&(n.isFavorite=!n.isFavorite),n}));f(n)},onOpenModal:n}),T&&(0,h.jsx)(g,{setPage:C})]})}}}]);
//# sourceMappingURL=461.b51ef4d0.chunk.js.map